<ion-header>
    <br>
    <ion-toolbar>
        <ion-title>{{title}} - Dynamic</ion-title>
        <ion-buttons slot="end">
            <ion-button (click)="dismiss()">Close</ion-button>
        </ion-buttons>
    </ion-toolbar>
</ion-header>

<ion-content>
    <ion-item line="none">
        <ion-buttons slot="start" >
            <ion-button *ngIf="templateToShow !== 0" size="small" fill="outline" (click)="templateToShow = 0">
                <ion-label> HOME</ion-label>
            </ion-button>
        </ion-buttons>
        <ion-buttons slot="end">
            <ion-button slot="start" *ngIf="templateToShow !== 1" size="small" fill="outline" (click)="templateToShow = 1; generateInputLevelStructSting()">
                <ion-label>Show InputLevelStruct</ion-label>
            </ion-button>
            <ion-button slot="end" *ngIf="templateToShow !== 2" size="small" fill="outline" (click)="templateToShow = 2; generateInputLevelStructSting()">
                <ion-label>Show String</ion-label>
            </ion-button>
            <ion-button slot="end" color="danger" *ngIf="templateToShow === 0 " size="small" fill="outline" (click)="resetAll()">
                <ion-label>Reset</ion-label>
            </ion-button>
        </ion-buttons>
    </ion-item>


    <div [ngSwitch]="templateToShow">
        <!-- ========================================================================================================================== -->
        <ng-template [ngSwitchCase]="'0'">
            <!--value Selection -->
            <ion-item-group>
                <ion-item-divider>
                    <ion-label>Value Selection</ion-label>
                </ion-item-divider>
                <ion-item>
                    <ion-label>Select:</ion-label>
                    <ion-select ok-text="Ok" cancel-text="Cancel" (ionChange)="valueSelectionChanged($event)">
                        <ion-select-option *ngFor="let valueSelectionId of valueSelectionIds" [value]="valueSelectionId"
                            [selected]="isSelected(valueSelectionId.id, valueSelectionID)">
                            {{helperService.getByLanguage(valueSelectionId.name)}}
                        </ion-select-option>
                    </ion-select>
                </ion-item>
                <ion-item *ngIf="valueSelectionAvailableFilters && valueSelectionAvailableFilters.length > 0">
                    <ion-label>Select Filter</ion-label>
                    <ion-select #valueSelctionHTML multiple ok-text="Ok" cancel-text="Cancel"
                        (ionChange)="valueSelectionFilterChanged($event)">
                        <ion-select-option *ngFor="let valueSelectionAvailableFilter of valueSelectionAvailableFilters"
                            [value]="valueSelectionAvailableFilter"
                            [selected]="isSelected(valueSelectionAvailableFilter.id, valueSelectionFilter)">
                            {{helperService.getByLanguage(valueSelectionAvailableFilter.name)}}
                        </ion-select-option>
                    </ion-select>
                </ion-item>
            </ion-item-group>

            <ng-container *ngFor="let iLevelStruct of getLevelStructGenerator()">
                <ion-item-group>
                    <ion-item-divider>
                        <ion-label>Select Level: {{iLevelStruct.level}}</ion-label>
                        <ion-button fill="outline" *ngIf="iLevelStruct.id && !iLevelStruct.subLevel" slot="end"
                            (click)="addLevel(iLevelStruct)">+ Level</ion-button>
                        <ion-button fill="outline" color="danger" slot="end"
                            (click)="deleteLevelBtPressed(iLevelStruct)">- Level</ion-button>
                    </ion-item-divider>
                    <ion-item>
                        <ion-label>*Select:</ion-label>
                        <ion-select ok-text="Ok" cancel-text="Cancel"
                            (ionChange)="levelSelectChanged($event, iLevelStruct)">
                            <ion-select-option *ngFor="let availableLevelID of iLevelStruct.availableLevelIDs"
                                [value]="availableLevelID"
                                [selected]="isSelected(availableLevelID.id, iLevelStruct.id)">
                                {{availableLevelID.type}} - {{helperService.getByLanguage(availableLevelID.name)}}
                            </ion-select-option>
                        </ion-select>
                    </ion-item>
                    <ion-item
                        *ngIf="iLevelStruct.subLevelAvailableFilters && iLevelStruct.subLevelAvailableFilters.length > 0">
                        <ion-label>Select SubLevelFilter</ion-label>
                        <ion-select multiple ok-text="Ok" cancel-text="Cancel"
                            (ionChange)="subLevelFilterChanged($event, iLevelStruct)">
                            <ion-select-option *ngFor="let subLevelAvailableFilter of iLevelStruct.subLevelAvailableFilters"
                                [value]="subLevelAvailableFilter"
                                [selected]="isSelected1(subLevelAvailableFilter.id, iLevelStruct.subLevelFilters)">
                                {{helperService.getByLanguage(subLevelAvailableFilter.name)}}
                            </ion-select-option>
                        </ion-select>
                    </ion-item>
                </ion-item-group>
            </ng-container>
        </ng-template>
        <!-- ========================================================================================================================== -->
        <ng-template [ngSwitchCase]="'2'">
            <code>
                <pre>{{tmpInputLevelString}}</pre>
            </code>
        </ng-template>
        <!-- ========================================================================================================================== -->
        <ng-template [ngSwitchCase]="'1'">
            <div style="margin:2em;">
                <!-- <app-tree [treeData]="inputLevelStruct" [showAgenda]="false" (moreInfoFor)="getMoreInfo($event)"> -->
                <app-tree [treeData]="tmpInputLevelStruct" [showAgenda]="false" (moreInfoFor)="getMoreInfo($event)">
                </app-tree>
            </div>
        </ng-template>
        <!-- ========================================================================================================================== -->
    </div>
</ion-content>